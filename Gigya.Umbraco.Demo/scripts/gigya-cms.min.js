!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;t.qwest=n()}}(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(t,i){!function(t){"use strict";var r=function(n){var t=function(n,t,i){i="function"==typeof i?i():null===i?"":void 0===i?"":i;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(i)},i=function(n,r,u){var e,o,f;if("[object Array]"===Object.prototype.toString.call(r))for(e=0,o=r.length;o>e;e++)i(n+"["+("object"==typeof r[e]?e:"")+"]",r[e],u);else if(r&&"[object Object]"===r.toString())for(f in r)r.hasOwnProperty(f)&&(n?i(n+"["+f+"]",r[f],u,t):i(f,r[f],u,t));else if(n)t(u,n,r);else for(f in r)t(u,f,r[f]);return u};return i("",n,[]).join("&").replace(/%20/g,"+")};"object"==typeof i&&"object"==typeof i.exports?i.exports=r:"function"==typeof n&&n.amd?n([],function(){return r}):t.param=r}(this)},{}],2:[function(n,t){!function(n){function t(n){return"function"==typeof n}function u(n){return"object"==typeof n}function i(n){"undefined"!=typeof setImmediate?setImmediate(n):"undefined"!=typeof process&&process.nextTick?process.nextTick(n):setTimeout(n,0)}var r;n[0][n[1]]=function f(n){var e,h=[],o=[],s=function(n,t){return null==e&&null!=n&&(e=n,h=t,o.length&&i(function(){for(var n=0;n<o.length;n++)o[n]()})),e};return s.then=function(s,c){var l=f(n),a=function(){function n(i){var e,f=0;try{if(i&&(u(i)||t(i))&&t(e=i.then)){if(i===l)throw new TypeError;e.call(i,function(){f++||n.apply(r,arguments)},function(n){f++||l(!1,[n])})}else l(!0,arguments)}catch(o){f++||l(!1,[o])}}try{var i=e?s:c;t(i)?n(i.apply(r,h||[])):l(e,h)}catch(f){l(!1,[f])}};return null!=e?i(a):o.push(a),l},n&&(s=n(s)),s}}("undefined"==typeof t?[window,"pinkySwear"]:[t,"exports"])},{}],qwest:[function(n,t){t.exports=function(){var i="undefined"!=typeof window?window:self,s=n("pinkyswear"),v=n("jquery-param"),r={},h="json",c="post",l=null,u=0,f=[],a=i.XMLHttpRequest?function(){return new i.XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")},o=""===a().responseType,y=function(n,t,e,y,p){var d,ft,vt;n=n.toUpperCase();e=e||null;y=y||{};for(d in r)if(!(d in y))if("object"==typeof r[d]&&"object"==typeof y[d])for(ft in r[d])y[d][ft]=r[d][ft];else y[d]=r[d];var et,w,ot,nt,b,st=!1,g=!1,it=!1,yt=0,k={},rt={text:"*/*",xml:"text/xml",json:"application/json",post:"application/x-www-form-urlencoded",document:"text/html"},ht={text:"*/*",xml:"application/xml; q=1.0, text/xml; q=0.8, */*; q=0.1",json:"application/json; q=1.0, text/*; q=0.8, */*; q=0.1"},ut=!1,tt=s(function(r){return r.abort=function(){it||(w&&4!=w.readyState&&w.abort(),ut&&(--u,ut=!1),it=!0)},r.send=function(){if(!ut){if(u==l)return void f.push(r);if(it)return void(f.length&&f.shift().send());if(++u,ut=!0,w=a(),et&&("withCredentials"in w||!i.XDomainRequest||(w=new XDomainRequest,g=!0,"GET"!=n&&"POST"!=n&&(n="POST"))),g?w.open(n,t):(w.open(n,t,y.async,y.user,y.password),o&&y.async&&(w.withCredentials=y.withCredentials)),!g)for(var s in k)k[s]&&w.setRequestHeader(s,k[s]);if(o&&"auto"!=y.responseType)try{w.responseType=y.responseType;st=w.responseType==y.responseType}catch(h){}o||g?(w.onload=ct,w.onerror=lt,g&&(w.onprogress=function(){})):w.onreadystatechange=function(){4==w.readyState&&ct()};y.async?"timeout"in w?(w.timeout=y.timeout,w.ontimeout=at):ot=setTimeout(at,y.timeout):g&&(w.ontimeout=function(){});"auto"!=y.responseType&&"overrideMimeType"in w&&w.overrideMimeType(rt[y.responseType]);p&&p(w);g?setTimeout(function(){w.send("GET"!=n?e:null)},0):w.send("GET"!=n?e:null)}},r}),ct=function(){var n,t;if(ut=!1,clearTimeout(ot),f.length&&f.shift().send(),!it){--u;try{if(st&&"response"in w&&null!==w.response)b=w.response;else{(n=y.responseType,"auto"==n)&&(g?n=h:(t=w.getResponseHeader("Content-Type")||"",n=t.indexOf(rt.json)>-1?"json":t.indexOf(rt.xml)>-1?"xml":"text"));switch(n){case"json":if(w.responseText.length)try{b="JSON"in i?JSON.parse(w.responseText):new Function("return ("+w.responseText+")")()}catch(r){throw"Error while parsing JSON body : "+r;}break;case"xml":try{i.DOMParser?b=(new DOMParser).parseFromString(w.responseText,"text/xml"):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(w.responseText))}catch(r){b=void 0}if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)throw"Invalid XML";break;default:b=w.responseText}}if("status"in w&&!/^2|1223/.test(w.status))throw w.status+" ("+w.statusText+")";tt(!0,[w,b])}catch(r){tt(!1,[r,w,b])}}},lt=function(n){it||(n="string"==typeof n?n:"Connection aborted",tt.abort(),tt(!1,[new Error(n),w,null]))},at=function(){it||(y.attempts&&++yt==y.attempts?lt("Timeout ("+t+")"):(w.abort(),ut=!1,tt.send()))};if(y.async="async"in y?!!y.async:!0,y.cache="cache"in y?!!y.cache:!1,y.dataType="dataType"in y?y.dataType.toLowerCase():c,y.responseType="responseType"in y?y.responseType.toLowerCase():"auto",y.user=y.user||"",y.password=y.password||"",y.withCredentials=!!y.withCredentials,y.timeout="timeout"in y?parseInt(y.timeout,10):3e4,y.attempts="attempts"in y?parseInt(y.attempts,10):1,nt=t.match(/\/\/(.+?)\//),et=nt&&(nt[1]?nt[1]!=location.host:!1),"ArrayBuffer"in i&&e instanceof ArrayBuffer?y.dataType="arraybuffer":"Blob"in i&&e instanceof Blob?y.dataType="blob":"Document"in i&&e instanceof Document?y.dataType="document":"FormData"in i&&e instanceof FormData&&(y.dataType="formdata"),null!==e)switch(y.dataType){case"json":e=JSON.stringify(e);break;case"post":e=v(e)}if(y.headers){vt=function(n,t,i){return t+i.toUpperCase()};for(nt in y.headers)k[nt.replace(/(^|-)([^-])/g,vt)]=y.headers[nt]}return"Content-Type"in k||"GET"==n||y.dataType in rt&&rt[y.dataType]&&(k["Content-Type"]=rt[y.dataType]),k.Accept||(k.Accept=y.responseType in ht?ht[y.responseType]:"*/*"),et||"X-Requested-With"in k||(k["X-Requested-With"]="XMLHttpRequest"),y.cache||"Cache-Control"in k||(k["Cache-Control"]="no-cache"),"GET"==n&&e&&"string"==typeof e&&(t+=(/\?/.test(t)?"&":"?")+e),y.async&&tt.send(),tt},e=function(n){var t=[],r=0,i=[];return s(function(u){var o=-1,f=function(n){return function(f,e,s,h){var c=++o;return++r,t.push(y(n,u.base+f,e,s,h).then(function(){i[c]=arguments;--r||u(!0,1==i.length?i[0]:[i])},function(){u(!1,arguments)})),u}},e;u.get=f("GET");u.post=f("POST");u.put=f("PUT");u["delete"]=f("DELETE");u["catch"]=function(n){return u.then(null,n)};u.complete=function(n){var t=function(){n()};return u.then(t,t)};u.map=function(n,t,i,r,u){return f(n.toUpperCase()).call(this,t,i,r,u)};for(e in n)e in u||(u[e]=n[e]);return u.send=function(){for(var n=0,i=t.length;i>n;++n)t[n].send();return u},u.abort=function(){for(var n=0,i=t.length;i>n;++n)t[n].abort();return u},u})},t={base:"",get:function(){return e(t).get.apply(this,arguments)},post:function(){return e(t).post.apply(this,arguments)},put:function(){return e(t).put.apply(this,arguments)},"delete":function(){return e(t)["delete"].apply(this,arguments)},map:function(){return e(t).map.apply(this,arguments)},xhr2:o,limit:function(n){return l=n,t},setDefaultOptions:function(n){return r=n,t},setDefaultXdrResponseType:function(n){return h=n.toLowerCase(),t},setDefaultDataType:function(n){return c=n.toLowerCase(),t},getOpenRequests:function(){return u}};return t}()},{"jquery-param":1,pinkyswear:2}]},{},[1,2])("qwest")});
/*! onDomReady.js 1.4.0 (c) 2013 Tubal Martin - MIT license */
(function(n){"function"==typeof define&&define.amd?define(n):window.onDomReady=n()})(function(){"use strict";function e(t){if(!f){if(!n.body)return u(e);for(f=!0;t=nt.shift();)u(t)}}function t(t){(l||t.type===o||n[p]===y)&&(a(),e())}function a(){l?(n[g](k,t,r),i[g](o,t,r)):(n[b](d,t),i[b](v,t))}function u(n,t){setTimeout(n,+t>=0?t:1)}function h(n){f?u(n):nt.push(n)}var i=window,n=i.document,tt=n.documentElement,o="load",r=!1,v="on"+o,y="complete",p="readyState",w="attachEvent",b="detachEvent",c="addEventListener",k="DOMContentLoaded",d="onreadystatechange",g="removeEventListener",l=c in n,s=r,f=r,nt=[];if(n[p]===y)u(e);else if(l)n[c](k,t,r),i[c](o,t,r);else{n[w](d,t);i[w](v,t);try{s=null==i.frameElement&&tt}catch(rt){}s&&s.doScroll&&function it(){if(!f){try{s.doScroll("left")}catch(n){return u(it,50)}a();e()}}()}return h.version="1.4.0",h.isReady=function(){return f},h});var gigyaCms={responseCodes:{Error:0,Success:1,AlreadyLoggedIn:2},authenticated:!1,authenticatedOnServerByCurrentPage:!1,baseUrl:"/api/gigya/account/",debugMode:!1,log:function(n,t){gigyaCms.debugMode&&window.console&&(t?console.log(n,t):console.log(n))},handleError:function(n){n&&n.length>0?alert(n):alert(gigyaCms.genericErrorMessage)},redirectAfterLogin:function(n){gigyaCms.loggedInRedirectUrl!=""&&(n=gigyaCms.loggedInRedirectUrl);n&&n.length>0?window.location=n:window.location.reload()},redirectAfterEditProfile:function(){},redirectAfterLogout:function(n){gigyaCms.logoutRedirectUrl!=""&&(n=gigyaCms.logoutRedirectUrl);n&&n.length>0?window.location=n:window.location.reload()},genericErrorMessage:"Sorry an error occurred. Please try again.",id:"",loggedInRedirectUrl:"",logoutRedirectUrl:"",logoutApiAction:"logout",screenSetSettings:{login:{screenSet:"Default-RegistrationLogin"},register:{screenSet:"Default-RegistrationLogin",mobileScreenSet:"DefaultMobile-RegistrationLogin",startScreen:"gigya-register-screen"},editProfile:{screenSet:"Default-ProfileUpdate",mobileScreenSet:"DefaultMobile-ProfileUpdate",onAfterSubmit:function(n){gigyaCms.onProfileUpdated(n)}}},initGetAccountInfo:function(){gigya.accounts.getAccountInfo({callback:gigyaCms.onGetAccountInfo})},attachEvents:function(n,t,i){for(var r=0;r<n.length;r++)n[r].addEventListener(t,i,!1)},applyConfig:function(){window.gigyaConfig.errorMessage&&window.gigyaConfig.errorMessage.length>0&&(gigyaCms.genericErrorMessage=window.gigyaConfig.errorMessage);gigyaCms.id=window.gigyaConfig.id;gigyaCms.loggedInRedirectUrl=window.gigyaConfig.loggedInRedirectUrl;gigyaCms.logoutRedirectUrl=window.gigyaConfig.logoutRedirectUrl;gigyaCms.debugMode=window.gigyaConfig.debugMode;window.gigyaConfig.logoutApiAction&&(gigyaCms.logoutApiAction=window.gigyaConfig.logoutApiAction);window.gigyaBaseUrl&&(gigyaCms.baseUrl=window.gigyaBaseUrl)},showScreenSet:function(n,t){var r=gigyaCms.screenSetSettings.login.containerID,i=t.target.getAttribute("data-container-id");i&&(n.containerID=i);gigya.accounts.showScreenSet(n);n.containerID=r},initialized:!1,init:function(){if(gigyaCms.initialized){gigyaCms.log("gigyaCms already initialized...ignoring");return}gigyaCms.attachEvents(document.getElementsByClassName("gigya-login"),"click",function(n){return gigyaCms.showScreenSet(gigyaCms.screenSetSettings.login,n),!1});gigyaCms.attachEvents(document.getElementsByClassName("gigya-logout"),"click",function(){return gigya.accounts.logout(),!1});gigyaCms.attachEvents(document.getElementsByClassName("gigya-register"),"click",function(n){return gigyaCms.showScreenSet(gigyaCms.screenSetSettings.register,n),!1});gigyaCms.attachEvents(document.getElementsByClassName("gigya-edit-profile"),"click",function(n){return gigyaCms.showScreenSet(gigyaCms.screenSetSettings.editProfile,n),!1});gigya.accounts.addEventHandlers({onLogin:gigyaCms.onLogin,onLogout:gigyaCms.onLogout});gigyaCms.initialized=!0},onGetAccountInfo:function(n){gigyaCms.log("onGetAccountInfo",n);n.errorCode==0?gigyaCms.login(n,!1):gigyaCms.logout(!1)},onProfileUpdated:function(n){if(gigyaCms.log("onProfileUpdated",n),n.response&&n.response.UID){var t={UserId:n.response.UID,Signature:n.response.UIDSignature,SignatureTimestamp:n.response.signatureTimestamp,Id:gigyaCms.id};qwest.post(gigyaCms.baseUrl+"editprofile",t).then(function(n,t){t!=null&&t.status==gigyaCms.responseCodes.Success?gigyaCms.redirectAfterEditProfile(t.redirectUrl):gigyaCms.handleError(t.errorMessage)}).catch(function(){gigyaCms.handleError()})}},onLogin:function(n){gigyaCms.log("onLogin",n);gigyaCms.login(n,!0)},loggingIn:!1,login:function(n,t){if(!gigyaCms.loggingIn){gigyaCms.loggingIn=!0;var i={UserId:n.UID,Signature:n.UIDSignature,SignatureTimestamp:n.signatureTimestamp,Id:gigyaCms.id};qwest.post(gigyaCms.baseUrl+"login",i).then(function(n,i){if(gigyaCms.loggingIn=!1,i!=null)switch(i.status){case gigyaCms.responseCodes.AlreadyLoggedIn:gigyaCms.authenticated=!0;t===!0&&gigyaCms.authenticatedOnServerByCurrentPage&&gigyaCms.redirectAfterLogin(i.redirectUrl);gigyaCms.authenticatedOnServerByCurrentPage=!0;return;case gigyaCms.responseCodes.Success:gigyaCms.authenticated=!0;gigyaCms.authenticatedOnServerByCurrentPage=!0;t===!0&&gigyaCms.redirectAfterLogin(i.redirectUrl);return;case gigyaCms.responseCodes.Error:gigyaCms.log("logout");gigya.accounts.logout();gigyaCms.handleError(i.errorMessage);return}else gigyaCms.log("logout"),gigya.accounts.logout(),gigyaCms.handleError(i.errorMessage)}).catch(function(n,t){gigyaCms.loggingIn=!1;gigyaCms.log("logout");gigya.accounts.logout();t.status===500&&gigyaCms.handleError()})}},onLogout:function(){gigyaCms.log("onLogout");gigyaCms.logout(!0)},logout:function(n){var t={Id:gigyaCms.id};qwest.post(gigyaCms.baseUrl+gigyaCms.logoutApiAction,t).then(function(t,i){i!=null&&i.status==gigyaCms.responseCodes.Success?n&&gigyaCms.redirectAfterLogout(i.redirectUrl):gigyaCms.handleError(i.errorMessage)}).catch(function(n,t){t.status===500&&gigyaCms.handleError()})}};gigyaCms.applyConfig();gigyaCms.initGetAccountInfo();onDomReady(function(){gigyaCms.init()});